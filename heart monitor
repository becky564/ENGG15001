# Import necessary modules
from machine import Pin, ADC
import time

# Initialise heart sensor and potentiometer ADCs
heart_sensor = ADC(26)      # GP26 = ADC0
potentiometer = ADC(27)     # GP27 = ADC1

# Initialise digital inputs for L0+ and L0-
L0_plus = Pin(10, Pin.IN)   # GP10 for L0+
L0_minus = Pin(11, Pin.IN)  # GP11 for L0-

# Initialise LED pin as an output
led = Pin(20, Pin.OUT)


while True:
    # Check if any lead is off
    if L0_plus.value() == 1 or L0_minus.value() == 1:
        print("Lead off detected! Check ECG electrodes")
        led.off()
    else:
    # Read the signal from the heart monitor and potentiometer as u16
     heart_reading = heart_sensor.read_u16()
     potentiometer_reading = potentiometer.read_u16()

# Compare readings to control LED
if heart_reading > potentiometer_reading:
    led.on()

else:
    led.off()

if heart_reading > 100:
    print("stress, heart beating too fast, check for tachycardia")

else:
    heart_reading < 60
    print("heart beating too slow, check for bradycardia")

# Print the heart reading and potentiometer on the same line
print(str(heart_reading) + "," + str(potentiometer_reading))

# Insert 0.005s sleep to slow down the printing rate
time.sleep(0.005)
